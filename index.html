<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-loading-bar.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="å½±æœˆæµå…‰" type="application/atom+xml" />






<meta name="description" content="æ…¢æ…¢èµ°å•Š">
<meta property="og:type" content="website">
<meta property="og:title" content="å½±æœˆæµå…‰">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;index.html">
<meta property="og:site_name" content="å½±æœˆæµå…‰">
<meta property="og:description" content="æ…¢æ…¢èµ°å•Š">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>å½±æœˆæµå…‰</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband">
    <a href="https://github.com/you" target="_blank" rel="noopener"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_left_orange_ff7600.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å½±æœˆæµå…‰</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ç–å½±æ¨ªæ–œæ°´æ¸…æµ…</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ä½œå“é›†">
          <a href="/portfolios" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            ä½œå“é›†
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/31/%E5%85%A8%E5%B1%80%E6%8B%A6%E6%88%AA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/31/%E5%85%A8%E5%B1%80%E6%8B%A6%E6%88%AA/" itemprop="url">å…¨å±€æ‹¦æˆª</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-31T12:49:23+08:00">
                2019-10-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  893å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  3min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æˆæƒ</p>
<h2 id="æ³¨å†Œç•Œé¢"><a href="#æ³¨å†Œç•Œé¢" class="headerlink" title="æ³¨å†Œç•Œé¢"></a>æ³¨å†Œç•Œé¢</h2><p>å…¨å±€æ‹¦æˆª</p>
<p>è¡¨å•æ ¡éªŒ</p>
<ul>
<li>æ­£åˆ™æ ¡éªŒé‚®ç®±/æ‰‹æœºå·æ ¼å¼</li>
<li><h2 id="æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦è¢«æ³¨å†Œ"><a href="#æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦è¢«æ³¨å†Œ" class="headerlink" title="æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦è¢«æ³¨å†Œ"></a>æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦è¢«æ³¨å†Œ</h2></li>
<li>åˆ·æ–°é¡µé¢ä¿ç•™æœªæäº¤çš„è¡¨å•æ•°æ®<ul>
<li>ç”¨sessionStorageç¼“å­˜è¡¨å•å†…å®¹ï¼Œæäº¤æˆåŠŸå°±æ¸…ç©ºsessionStorage</li>
</ul>
</li>
<li>ç¦»å¼€é¡µé¢ã€åˆ·æ–°é¡µé¢ã€å…³é—­é¡µé¢æç¤ºæ˜¯å¦ç¡®å®šç¦»å¼€<ul>
<li>è·¯ç”±é’©å­ç¦»å¼€é¡µé¢</li>
<li>åˆ·æ–°ã€å…³é—­windowäº‹ä»¶ç›‘å¬</li>
</ul>
</li>
</ul>
<p>éªŒè¯ç </p>
<ul>
<li><p>å€’è®¡æ—¶</p>
</li>
<li><p>é‚®ç®±éªŒè¯ç ã€çŸ­ä¿¡éªŒè¯ç </p>
<ul>
<li>å‰ç«¯æ ¹æ®è¾“å…¥çš„ç”¨æˆ·åç±»å‹è°ƒç”¨ä¸åŒçš„æ¥å£</li>
</ul>
</li>
<li><p>éªŒè¯ç ä¸€åˆ†é’Ÿå†…æœ‰æ•ˆï¼Œä¸”ä¸å¾—é‡å‘ï¼Œå³ä½¿åˆ·æ–°é¡µé¢ä¹Ÿä¸èƒ½é‡å‘ï¼Œå¼¹å‡ºæç¤º</p>
<ul>
<li><p>ä½¿ç”¨session cookie æ¥é˜²æ­¢é‡å¤ç”³è¯·éªŒè¯ç æ³¨æ„axiosè¦è®¾ç½®</p>
</li>
<li><p>éªŒè¯ç ä¿å­˜åœ¨sessionä¸­ï¼Œæœ‰æ•ˆæœŸä¸€åˆ†é’Ÿ</p>
</li>
<li><p>sessionä¸ºæœåŠ¡å™¨ç«¯å­˜å‚¨ç”¨æˆ·ä¼šè¯çš„æ–¹å¼<br>åœ¨æµè§ˆå™¨ä¸­åªèƒ½çœ‹è§ç”¨äºæ ‡è¯†sessionçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆsessionidï¼‰ï¼Œå®ƒä¸€èˆ¬é€šè¿‡cookieä¿å­˜<br>æ‰€ä»¥å¯ä»¥é€šè¿‡Resourcesä¸‹çš„Cookiesçœ‹åˆ°å½“å‰é¡µé¢ç›¸å…³åŸŸä¸‹çš„æ‰€æœ‰cookie</p>
</li>
<li><pre><code>npm i --save cookie-parser
npm i --save express-session
sessionçš„è®¤è¯æœºåˆ¶å¿…é¡»ä¾èµ–cookieï¼Œæ‰€ä»¥è¿˜åº”è¯¥åŒæ—¶å®‰è£…ä¸€ä¸ªcookie-parser
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  -<span class="ruby"> </span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  - smtpæ¯æ—¥å‘é‚®ä»¶æœ‰æ•°é‡é™åˆ¶</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">- æäº¤è¡¨å•ï¼Œåç«¯æ¯”å¯¹éªŒè¯ç </span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">- åç«¯æ¥å£è¿”å›çš„çŠ¶æ€ç ä¸ç”¨httpçŠ¶æ€ç ,æ­£å¸¸è¿”å›,ç”¨codeè¡¨ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">å¯†ç å…¥åº“å‰åŠ å¯†</span></span><br></pre></td></tr></table></figure>
npm i bcrypt
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">valè¡¨ç¤ºä¼ å…¥çš„password 10è¡¨ç¤ºåŠ å¯†çš„ç­‰çº§ï¼Œç­‰çº§è¶Šé«˜ï¼Œè½¬åŒ–çš„æ—¶é•¿è¶Šé•¿</span><br></pre></td></tr></table></figure>
password:{
type:String,
set(val){
return require (&apos;bcrypt&apos;).hashgSync(val,10)
}
}
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åŠ å¯†ä¹‹åï¼Œå¯†ç åŸæ–‡è¢«æ›¿æ¢ä¸ºå¯†æ–‡äº†ã€‚æˆ‘ä»¬æ— æ³•è§£å¯†ï¼Œåªèƒ½é€šè¿‡bcryptçš„compareæ–¹æ³•ï¼Œå¯¹å†æ¬¡ä¼ å…¥çš„å¯†ç å’Œæ•°æ®åº“ä¸­ä¿å­˜çš„åŠ å¯†åçš„å¯†ç è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™ç™»å½•æˆåŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## ç™»å½•</span><br><span class="line"></span><br><span class="line">å›¾å½¢éªŒè¯ç </span><br></pre></td></tr></table></figure>
npm i svg-captcha --save
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç”¨æˆ·ç™»å½•å¯†ç è§£å¯†</span><br></pre></td></tr></table></figure>
app.post(&apos;/api/login&apos;, async (req, res) =&gt; {
const user = await User.findOne({
username: req.body.username
})
if (!user) {
return res.status(422).send({
message: &apos;ç”¨æˆ·åä¸å­˜åœ¨&apos;
})
}
// bcrypt.compareSync è§£å¯†åŒ¹é…ï¼Œè¿”å› boolean å€¼
const isPasswordValid = require(&apos;bcrypt&apos;).compareSync(
req.body.password,
user.password
)
if (!isPasswordValid) {
return res.status(422).send({
message: &apos;å¯†ç æ— æ•ˆ&apos;
})
}
res.send({
user
})
})
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç™»å½•æ·»åŠ token</span><br><span class="line"></span><br><span class="line">npm i jsonwebtoken</span><br></pre></td></tr></table></figure>
// å¼•å…¥ jwt
const jwt = require(&apos;jsonwebtoken&apos;)
// è§£æ token ç”¨çš„å¯†é’¥è‡ªå®šä¹‰
const SECRET = &apos;token_secret&apos;
</code></pre></li>
</ul>
</li>
</ul>
<p>åœ¨ç™»å½•æˆåŠŸæ—¶åˆ›å»º token<br>/*<br>ç”Ÿæˆ token<br>jwt.sign() æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ä¼ å…¥çš„å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯è‡ªå®šä¹‰çš„å¯†é’¥<br>*/<br>const token = jwt.sign({ id: String(user._id) }, SECRET)<br>res.send({<br> user,<br> token<br>})</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*è§£å¯† tokenè·å–ç™»å½•ç”¨æˆ·*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure>
<p>app.get(<code>&#39;/api/profile&#39;</code>, async (req, res) =&gt; {<br> <code>const raw = String(req.headers.authorization.split(</code>â€˜ â€˜<code>).pop())</code>// è§£å¯† token è·å–å¯¹åº”çš„ id<br> <code>const { id } = jwt.verify(raw, SECRET)</code>req.user = await User.findById(id)<br> ``res.send(req.user)<br>})</p>
<p>```</p>
<h1 id="åŠ å…¥-withCredentials-åæ— æ³•è¿›è¡Œè·¨åŸŸè¯·æ±‚"><a href="#åŠ å…¥-withCredentials-åæ— æ³•è¿›è¡Œè·¨åŸŸè¯·æ±‚" class="headerlink" title="åŠ å…¥ withCredentials åæ— æ³•è¿›è¡Œè·¨åŸŸè¯·æ±‚"></a>åŠ å…¥ withCredentials åæ— æ³•è¿›è¡Œè·¨åŸŸè¯·æ±‚</h1><h2 id="cookieå’Œsessionçš„åŒºåˆ«"><a href="#cookieå’Œsessionçš„åŒºåˆ«" class="headerlink" title="cookieå’Œsessionçš„åŒºåˆ«"></a>cookieå’Œsessionçš„åŒºåˆ«</h2><p>ã€€ã€€1ã€æœ€å¤§çš„åŒºåˆ«åº”è¯¥åœ¨äºå­˜å‚¨çš„åœ°æ–¹ä¸ä¸€æ ·ï¼Œcookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œsessionå­˜å‚¨åœ¨æœåŠ¡å™¨ï¼›<br>ã€€ã€€2ã€ä»å®‰å…¨æ€§æ–¹é¢æ¥è¯´ï¼Œcookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå¾ˆå®¹æ˜“è¢«çªƒå–ï¼Œæš´éœ²ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œsessionå­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œè¢«çªƒå–çš„æœºä¼šå°å¾ˆå¤šï¼Œæ•…sessionçš„å®‰å…¨æ€§æ¯”cookieé«˜ï¼›<br>ã€€ã€€3ã€ä»æ€§èƒ½æ–¹é¢æ¥è¯´ï¼Œcookieå­˜å‚¨åœ¨æµè§ˆå™¨ç«¯æ¶ˆè€—çš„æ˜¯ç”¨æˆ·çš„èµ„æºï¼Œç›¸å¯¹æ¯”è¾ƒåˆ†æ•£ï¼Œè€Œsessionæ¶ˆè€—çš„æœåŠ¡å™¨çš„å†…å­˜ï¼Œä¼šé€ æˆæœåŠ¡å™¨ç«¯çš„å‹åŠ›ï¼›<br>ã€€ã€€4ã€cookieå¯ä»¥é•¿æœŸçš„å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œä½†æ˜¯æ•°é‡å’Œå¤§å°éƒ½æ˜¯æœ‰é™åˆ¶çš„ï¼›sessionå­˜åœ¨æœåŠ¡å™¨çš„æ—¶é—´è¾ƒçŸ­ï¼Œä½†æ˜¯æ²¡æœ‰å¤§å°çš„é™åˆ¶ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/31/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%20jQuery%20%E7%9A%84%20API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/31/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%20jQuery%20%E7%9A%84%20API/" itemprop="url">å®ç°ä¸€ä¸ª jQuery çš„ API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-31T12:48:42+08:00">
                2019-10-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  518å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å®ç°ä¸€ä¸ª-jQuery-çš„-API"><a href="#å®ç°ä¸€ä¸ª-jQuery-çš„-API" class="headerlink" title="å®ç°ä¸€ä¸ª jQuery çš„ API"></a>å®ç°ä¸€ä¸ª jQuery çš„ API</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="variable">$div</span> = $(<span class="string">'div'</span>)</span><br><span class="line"><span class="variable">$div</span>.addClass(<span class="string">'red'</span>) <span class="comment">// å¯å°†æ‰€æœ‰ div çš„ class æ·»åŠ ä¸€ä¸ª red</span></span><br><span class="line"><span class="variable">$div</span>.setText(<span class="string">'hi'</span>) <span class="comment">// å¯å°†æ‰€æœ‰ div çš„ textContent å˜ä¸º hi</span></span><br></pre></td></tr></table></figure>

<p>1.å…ˆæ­å‡ºæ€»ä½“ç»“æ„,å¯¹ä¼ å…¥å‚æ•°è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œæ— è®ºä¼ å…¥çš„æ˜¯é€‰æ‹©å™¨è¿˜æ˜¯nodeèŠ‚ç‚¹ï¼Œéƒ½è¿”å›ä¸€ä¸ªå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">nodesOrSelector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> nodes = &#123;&#125;;</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> nodesOrSelector===<span class="string">'string'</span>)&#123;<span class="comment">//å¦‚æœä¼ å…¥çš„æ˜¯é€‰æ‹©å™¨</span></span><br><span class="line">          nodes=<span class="built_in">document</span>.querySelectorAll(nodeOrSelector);</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>((nodesOrSelector <span class="keyword">instanceof</span> Node))&#123;<span class="comment">//å¦‚æœä¼ å…¥çš„æ˜¯nodeèŠ‚ç‚¹</span></span><br><span class="line">          nodes=&#123;<span class="string">'0'</span>:nodesOrSelector,<span class="string">'length'</span>:<span class="number">1</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">      nodes.addClass = <span class="function"><span class="keyword">function</span>(<span class="params">classes</span>) </span>&#123;&#125;;</span><br><span class="line">      nodes.setText = <span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;&#125;;</span><br><span class="line">      <span class="keyword">return</span> nodes</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="built_in">window</span>.$ = jQuery;</span><br></pre></td></tr></table></figure>

<p>2.ä¸¤ä¸ªåŠŸèƒ½çš„å®ç°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">nodesOrSelector</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">let</span> nodes = &#123;&#125;;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">typeof</span> nodesOrSelector === <span class="string">"string"</span>) &#123;</span><br><span class="line">       <span class="comment">//å¦‚æœä¼ å…¥çš„æ˜¯é€‰æ‹©å™¨</span></span><br><span class="line">       nodes = <span class="built_in">document</span>.querySelectorAll(nodesOrSelector);</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nodesOrSelector <span class="keyword">instanceof</span> Node) &#123;</span><br><span class="line">       <span class="comment">//å¦‚æœä¼ å…¥çš„æ˜¯nodeèŠ‚ç‚¹</span></span><br><span class="line">       nodes = &#123; <span class="string">'0'</span>: nodesOrSelector, <span class="string">'length'</span>: <span class="number">1</span> &#125;;</span><br><span class="line">     &#125;</span><br><span class="line">     nodes.addClass = <span class="function"><span class="keyword">function</span>(<span class="params">classes</span>) </span>&#123;</span><br><span class="line">       <span class="comment">//ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚éå†nodeï¼Œæ¯æ¬¡éå†ç»™nodeæ·»åŠ æ‰€æœ‰çš„classï¼Œæ‰€ä»¥åŠ ä¸€ä¸ªå†…å¾ªç¯ï¼Œéå†class</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</span><br><span class="line">         classes.forEach(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">           nodes[i].classList.add(value);</span><br><span class="line">         &#125;);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     nodes.setText = <span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</span><br><span class="line">         nodes[i].textContent = text;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="keyword">return</span> nodes;</span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure>

<p>å®Œæ•´ä»£ç å¦‚ä¸‹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS Bin<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    div &#123;</span><br><span class="line">      width: 50px;</span><br><span class="line">      height: 30px;</span><br><span class="line">      margin-bottom: 10px;</span><br><span class="line">      background-color: blue;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.red</span> &#123;</span></span><br><span class="line">      background-color: red;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">nodesOrSelector</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> nodes = &#123;&#125;;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (<span class="keyword">typeof</span> nodesOrSelector === <span class="string">"string"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//å¦‚æœä¼ å…¥çš„æ˜¯é€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="javascript">        nodes = <span class="built_in">document</span>.querySelectorAll(nodesOrSelector);</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nodesOrSelector <span class="keyword">instanceof</span> Node) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//å¦‚æœä¼ å…¥çš„æ˜¯nodeèŠ‚ç‚¹</span></span></span><br><span class="line">        nodes = &#123; 0: nodesOrSelector, length: 1 &#125;;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">      nodes.addClass = <span class="function"><span class="keyword">function</span><span class="params">(classes)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚éå†nodeï¼Œæ¯æ¬¡éå†ç»™nodeæ·»åŠ æ‰€æœ‰çš„classï¼Œæ‰€ä»¥åŠ ä¸€ä¸ªå†…å¾ªç¯ï¼Œéå†class</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">          classes.forEach(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span></span><br><span class="line">            nodes[i].classList.add(value);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      nodes.setText = <span class="function"><span class="keyword">function</span><span class="params">(text)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</span></span><br><span class="line">          nodes[i].textContent = text;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> nodes;</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.$ = jQuery;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> $div = $(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">    $div.addClass([<span class="string">"red"</span>]);</span></span><br><span class="line"><span class="actionscript">    $div.setText(<span class="string">"hi"</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>












          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/x%20npm%20install%20apidoc%20-gapidoc%20-i%20%E8%BE%93%E5%85%A5%E7%9B%AE%E5%BD%95%20-o%20%E8%BE%93%E5%87%BA%E7%9B%AE%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/x%20npm%20install%20apidoc%20-gapidoc%20-i%20%E8%BE%93%E5%85%A5%E7%9B%AE%E5%BD%95%20-o%20%E8%BE%93%E5%87%BA%E7%9B%AE%E5%BD%95/" itemprop="url">x npm install apidoc -gapidoc -i è¾“å…¥ç›®å½• -o è¾“å‡ºç›®å½•</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-25T23:36:54+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  17å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">npm</span> <span class="string">install apidoc -g</span></span><br><span class="line"><span class="attr">apidoc</span> <span class="string">-i è¾“å…¥ç›®å½• -o è¾“å‡ºç›®å½•</span></span><br></pre></td></tr></table></figure>

<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572013577910.png" alt="1572013577910"></p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572013611618.png" alt="1572013611618"></p>
<p>æ”¹æ ‡é¢˜</p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572014162483.png" alt="1572014162483"></p>

          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/nodemailer%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/nodemailer%E6%A8%A1%E5%9D%97/" itemprop="url">nodemaileræ¨¡å—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-25T21:07:32+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  305å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ç¬¬ä¸‰æ–¹æ¨¡å—nodemailerç”¨äºå‘é‚®ä»¶</p>
<p>å¼•å…¥</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> nodemailer</span><br></pre></td></tr></table></figure>

<p>é‚®ç®±éªŒè¯ç å’Œæ‰‹æœºéªŒè¯ç çš„é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œ</p>
<p>å¾€é‚®ç®±é‡Œå‘éªŒè¯ç ç›®å‰æ˜¯å…è´¹çš„</p>
<p>å¤åˆ¶ç¤ºä¾‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">const</span> nodemailer = <span class="built_in">require</span>(<span class="string">'nodemailer'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// async..await is not allowed in global scope, must use a wrapper</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Generate test SMTP service account from ethereal.email</span></span><br><span class="line">    <span class="comment">// Only needed if you don't have a real mail account for testing</span></span><br><span class="line">    <span class="keyword">let</span> testAccount = <span class="keyword">await</span> nodemailer.createTestAccount();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå‘é€é‚®ä»¶çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> transporter = nodemailer.createTransport(&#123;</span><br><span class="line">        host: <span class="string">'smtp.qq.com'</span>,<span class="comment">//å‘é€æ–¹é‚®ç®±ï¼ˆä¾‹å¦‚qq) é€šè¿‡æ¨¡å—æ–‡ä»¶å¤¹ä¸‹çš„lib/wellknown/services.jsonæ›´æ”¹é‚®ç®±æ˜ å°„çš„åŸŸå</span></span><br><span class="line">        port: <span class="number">587</span>,<span class="comment">//ç«¯å£å·</span></span><br><span class="line">        secure: <span class="literal">false</span>, <span class="comment">// true for 465, false for other ports</span></span><br><span class="line">        auth: &#123;</span><br><span class="line">            user: testAccount.user, <span class="comment">// å‘é€æ–¹çš„é‚®ç®±åœ°å€</span></span><br><span class="line">            pass: testAccount.pass <span class="comment">// mtpéªŒè¯ç </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// send mail with defined transport object</span></span><br><span class="line">    <span class="keyword">let</span> info = <span class="keyword">await</span> transporter.sendMail(&#123;</span><br><span class="line">        <span class="keyword">from</span>: <span class="string">'"Fred Foo ğŸ‘»" &lt;foo@example.com&gt;'</span>, <span class="comment">// sender address</span></span><br><span class="line">        to: <span class="string">'bar@example.com, baz@example.com'</span>, <span class="comment">// list of receivers</span></span><br><span class="line">        subject: <span class="string">'Hello âœ”'</span>, <span class="comment">// Subject line</span></span><br><span class="line">        text: <span class="string">'Hello world?'</span>, <span class="comment">// plain text body text,htmläºŒé€‰ä¸€</span></span><br><span class="line">        html: <span class="string">'&lt;b&gt;Hello world?&lt;/b&gt;'</span> <span class="comment">// html body</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Message sent: %s'</span>, info.messageId);</span><br><span class="line">    <span class="comment">// Message sent: &lt;b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Preview only available when sending through an Ethereal account</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Preview URL: %s'</span>, nodemailer.getTestMessageUrl(info));</span><br><span class="line">    <span class="comment">// Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main().catch(<span class="built_in">console</span>.error);</span><br></pre></td></tr></table></figure>

<p>nodemailer lib wellko service,json</p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572006982656.png" alt="1572006982656"></p>
<p>é‚®ç®±è®¾ç½® å¼€å¯pop3/smtpæœåŠ¡</p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572009085588.png" alt="1572009085588"></p>

          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/mongoDB%E7%9A%84%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/mongoDB%E7%9A%84%E5%AE%89%E8%A3%85/" itemprop="url">mongoDBçš„å®‰è£…</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-25T19:32:05+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  262å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¯åŠ¨mongoDB</p>
<p>è¿›å…¥</p>
<p>c/data/db/bin</p>
<p>å‘½ä»¤è¡Œmongod</p>
<p>è¿æ¥æ•°æ®åº“</p>
<p>å†å¼€ä¸€ä¸ªçª—å£</p>
<p>show dbs</p>
<p>ç¯å¢ƒå˜é‡</p>
<p>Mongodbçš„å®‰è£…è·¯å¾„åˆ°binç›®å½•ï¼Œå¤åˆ¶åœ°å€æ çš„è·¯å¾„ï¼ŒåŠ åˆ°ç¯å¢ƒå˜é‡PATHä¸­</p>
<p>mongodå‘½ä»¤è¡Œå¯åŠ¨æ•°æ®åº“æŒ‡ä»¤</p>
<p>mongo å‘½ä»¤è¡Œæ“ä½œæ•°æ®åº“æŒ‡ä»¤</p>
<p>mongoose nodeæ“ä½œæ•°æ®åº“</p>
<p>mongoDBçš„å¯è§†åŒ–å·¥å…·</p>
<p>Robo 3T</p>
<p>éªŒè¯ç æ¥å£é€»è¾‘</p>
<p>ç”¨æˆ·è¾“å…¥æ•°æ®</p>
<p>å¦‚æœæ˜¯æ‰‹æœºå·ï¼Œå°±å¯ä»¥ç‚¹å‡»è·å–éªŒè¯ç ï¼Œå‰ç«¯æŒ‰é’®å˜æˆ60så€’è®¡æ—¶ï¼Œ</p>
<p>1.éªŒè¯ç”¨æˆ·åå­˜åœ¨</p>
<p>é‚®ç®±éªŒè¯ç æ¥å£</p>
<p>å‘é€é‚®ä»¶</p>
<p>é‚®ç®±å’ŒéªŒè¯ç ä¿å­˜åˆ°å†…å­˜ä¸­  å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡store={email:;code:;}</p>
<p>2.ç”ŸæˆéªŒè¯ç ï¼Œä¿å­˜ï¼ˆredis,æ•°æ®åº“ï¼‰</p>
<p>äº”åˆ†é’Ÿä¹‹å†…ä¸èƒ½é‡æ–°å‘é€{email:{code:;ctime:;}</p>
<p>ctimeæ˜¯ç¬¬ä¸€æ¬¡å‘é€æ—¶é—´çš„æ—¶é—´æˆ³ï¼Œæ¯æ¬¡å‘é€å¯¹æ¯”ä¸€ä¸‹å½“å‰æ—¶é—´å’Œæ—¶é—´æˆ³çš„å·®å€¼ï¼Œå¦‚æœå°äºäº”åˆ†é’Ÿå°±ä¸å‘</p>
<p>utils</p>
<p>-mail.js</p>
<p>å°è£…ä¸€ä¸ªé‚®ç®±æ¨¡å—</p>
<p>Mail.send(é‚®ç®±åœ°å€,éªŒè¯ç )</p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572006689160.png" alt="1572006689160"></p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572006364892.png" alt="1572006364892"></p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572006426964.png" alt="1572006426964"></p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572006564358.png" alt="1572006564358"></p>

          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/express/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/express/" itemprop="url">express</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-25T15:34:35+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  851å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  3min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="express"><a href="#express" class="headerlink" title="express"></a>express</h1><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="built_in">express</span> --<span class="built_in">save</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰æ–¹æ¨¡å—çš„å¼•ç”¨æ˜¯ä»å…ˆå½“å‰ç›®å½•çš„node_modulesé‡ŒæŸ¥æ‰¾ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œæ²¡æœ‰åˆ™é€çº§å‘ä¸Š</p>
<h2 id="å¼€å¯æœåŠ¡å™¨"><a href="#å¼€å¯æœåŠ¡å™¨" class="headerlink" title="å¼€å¯æœåŠ¡å™¨"></a>å¼€å¯æœåŠ¡å™¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å†™ä¸€ä¸ªæ¥å£</span></span><br><span class="line">    app.get(<span class="string">'/user/login'</span>, (req, res) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(req.query)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'ä½ å¥½'</span>)</span><br><span class="line">      res.send(&#123; <span class="attr">err</span>: <span class="number">0</span>, <span class="attr">msg</span>: <span class="string">'okok'</span> &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'server start'</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>



<p>æœåŠ¡å™¨è½¯ä»¶ï¼ˆnodeã€tomcatã€iisã€ngnix)</p>
<p>åœ¨å¤–ç½‘ï¼Œipç¡®å®šæœåŠ¡å™¨ä¸»æœºçš„ä½ç½®ï¼Œportç¡®å®šæœåŠ¡å™¨é‡ŒæŸä¸€ä¸ªç¨‹åº</p>
<p>æ¥å£æµ‹è¯•å·¥å…·postman</p>
<p><img src="C:%5CUsers%5CRivoc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1571990949051.png" alt="1571990949051"></p>
<h2 id="apiæ¥å£çš„ä¹¦å†™"><a href="#apiæ¥å£çš„ä¹¦å†™" class="headerlink" title="apiæ¥å£çš„ä¹¦å†™"></a>apiæ¥å£çš„ä¹¦å†™</h2><p>æå–è¯·æ±‚ä¿¡æ¯</p>
<ul>
<li>getæ–¹æ³•è¯·æ±‚çš„å‚æ•°ç”¨req.queryæå–</li>
<li>postæ–¹æ³•è¯·æ±‚çš„å‚æ•°ç”¨req.bodyæå–ï¼Œä½†è¦ç”¨åˆ°æ’ä»¶ï¼Œä¾‹å¦‚body-parserè§£æï¼ˆæ”¯æŒè§£æä¸‹é¢1,3ï¼‰å› ä¸ºpostæäº¤çš„æ•°æ®æ ¼å¼æœ‰4ç§<ul>
<li>application/www-form-ulrencodedï¼ˆé»˜è®¤ï¼‰</li>
<li>multipart/form-data</li>
<li>application/json</li>
<li>text/xml</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> multipart = <span class="built_in">require</span>(<span class="string">'connect-multiparty'</span>)</span><br><span class="line">   <span class="keyword">const</span> multipartMiddleware = multipart()</span><br><span class="line">   app.post(<span class="string">'/formdata'</span>, multipartMiddleware, (req, res) =&gt; &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(req.body)</span><br><span class="line">     res.send(<span class="string">'post successfully!'</span>)</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="keyword">const</span> bodyparser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line">   <span class="comment">//ä½¿ç”¨ä¸­é—´ä»¶è§£æè¡¨å•æ•°æ®</span></span><br><span class="line">   app.use(bodyparser, urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line">   <span class="comment">//è§£æjsonæ•°æ®</span></span><br><span class="line">   app.use(bodyparser.json())</span><br><span class="line">   app.post(<span class="string">'/user/reg'</span>, (req, res) =&gt; &#123;</span><br><span class="line">     <span class="keyword">let</span> &#123; us, ps &#125; = req.body</span><br><span class="line">     <span class="built_in">console</span>.log(req.body)</span><br><span class="line">     <span class="keyword">if</span> (us === <span class="number">123</span> &amp;&amp; ps === <span class="number">123</span>) &#123;</span><br><span class="line">       res.send(&#123; <span class="attr">err</span>: <span class="number">0</span>, <span class="attr">msg</span>: <span class="string">'ok'</span> &#125;)</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       res.send(&#123; <span class="attr">err</span>: <span class="number">-1</span>, <span class="attr">msg</span>: <span class="string">'nook'</span> &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>



<h2 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h2><p>ä¸­é—´ä»¶ middlewear</p>
<ul>
<li>å†…ç½®ä¸­é—´ä»¶ static</li>
<li>è‡ªå®šä¹‰ä¸­é—´ä»¶</li>
<li>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</li>
</ul>
<p>ä¸ºäº†é˜²æ­¢æœ‰äººåˆ·api,çº¦å®šå‰ç«¯æ¯æ¬¡è¯·æ±‚apiéƒ½è¦å¸¦ä¸€ä¸ªtokenï¼Œåç«¯åœ¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œåˆ¤æ–­è¯·æ±‚é‡Œæ˜¯å¦æºå¸¦tokenï¼Œæºå¸¦tokenåˆ™å…è®¸è¯·æ±‚</p>
<p>æ¯ä¸€ä¸ªæ¥å£å¤„ç†è¯·æ±‚æ—¶éƒ½è¦ä½¿ç”¨åˆ°è¿™ç§éªŒè¯æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä¸­é—´ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼ˆå…¨å±€ï¼‰</span></span><br><span class="line"><span class="comment">//nextæ˜¯å¦ç»§ç»­å¾€ä¸‹æ‰§è¡Œ,ä¸€å®šè¦å†™</span></span><br><span class="line">app.use(<span class="string">'/'</span>,(req,res,next)=&gt;&#123;</span><br><span class="line"><span class="keyword">let</span> token=req.query</span><br><span class="line"><span class="keyword">if</span>(token)&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">res.send(<span class="string">'ç¼ºå°‘token'</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//ç­‰ä»·å†™æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆè·¯å¾„ï¼‰é»˜è®¤ä¸ºæ ¹è·¯å¾„ï¼Œå¯ä»¥çœç•¥</span></span><br><span class="line">app.use(<span class="function">(<span class="params">req,res,nex</span>)=&gt;</span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä¸­é—´ä»¶å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ‹¦æˆªå™¨,åœ¨å›è°ƒå‡½æ•°ä¹‹å‰å…ˆå¤„ç†ä¸­é—´ä»¶</p>
<p>å±€éƒ¨ä¸­é—´ä»¶</p>
<p>å¯ä»¥å†™æ— æ•°ä¸ªï¼Œåªè¦åœ¨åˆé€‚çš„åœ°æ–¹next()å°±å¯ä»¥ä¸€ä¸ªä¸ªæ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/test1'</span>,(req,res,next)=&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">(req,res)=&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å†…ç½®ä¸­é—´ä»¶static </p>
<p>æŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„é™æ€èµ„æºå¯ä»¥è¢«å¤–éƒ¨è®¿é—®ï¼ˆé™æ€æ–‡ä»¶æ‰˜ç®¡ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//__dirnameæŒ‡å‘å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„ï¼ˆä»ç£ç›˜æ ¹ç›®å½•å¼€å§‹ï¼‰</span></span><br><span class="line"><span class="comment">//å†…ç½®è·¯å¾„æ¨¡å—pathï¼Œç”¨æ¥å¤„ç†è·¯å¾„,è¿™é‡Œç”¨æ¥æ‹¼æ¥é™æ€è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="comment">//ä»¥ä¸‹å†™æ³•é€šè¿‡åŸŸå ç«¯å£å· æŒ‡å®šç›®å½•é‡Œçš„æ–‡ä»¶åç§°ï¼ˆæ³¨æ„è·¯å¾„ä¸åŒ…æ‹¬æŒ‡å®šçš„ç›®å½•åï¼‰å°±å¯ä»¥è®¿é—®åˆ°é™æ€èµ„æº</span></span><br><span class="line">app.use(express.static(path.join(__dirname,<span class="string">'./xxx'</span>)))</span><br><span class="line"><span class="comment">//ä»¥ä¸‹å†™æ³•é€šè¿‡åŸŸå ç«¯å£å· public/æŒ‡å®šç›®å½•é‡Œçš„æ–‡ä»¶åç§°</span></span><br><span class="line">app.use(<span class="string">'/public'</span>,express.static(path.join(__dirname,<span class="string">'./xxx'</span>)))</span><br></pre></td></tr></table></figure>

<h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><p>è·¯ç”±æ‹†åˆ†ï¼Œå°†ä¸åŒåŠŸèƒ½çš„è·¯ç”±æ‹†åˆ†å˜æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä½œä¸ºæ¨¡å—æš´éœ²å‡ºå»ç»Ÿä¸€æ”¾åˆ°routeræ–‡ä»¶å¤¹ä¸‹</p>
<p>è®¿é—®localhost:3000/user/add</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·Ÿç”¨æˆ·æœ‰å…³çš„è·¯ç”±userRouter</span></span><br><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> router=express.Router()</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/add'</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">res.send(<span class="string">'user add'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.get(<span class="string">'/del'</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">res.send(<span class="string">'del add'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports=router</span><br></pre></td></tr></table></figure>

<p>server.jsï¼ˆå…¥å£æ–‡ä»¶ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> app=express()</span><br><span class="line"><span class="keyword">let</span> userRouter=<span class="built_in">require</span>(<span class="string">'./router/userRouter'</span>)</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>,<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'server start'</span>)&#125;)</span><br></pre></td></tr></table></figure>



<p>nodemon</p>

          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/nodejs%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/nodejs%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" itemprop="url">nodejsç¬”è®°ï¼ˆä¸€ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-25T14:43:44+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  141å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>nodejsæ²¡æœ‰webå®¹å™¨çš„æ¦‚å¿µï¼Œæ¯”å¦‚å†™ä¸€ä¸ªhtmlæ–‡ä»¶ç„¶åè¿è¡ŒåŒçº§ç›®å½•ä¸‹çš„js <code>node xxx,js</code>,ä¸ä¼šæ˜¾ç¤ºå‡ºhtmlå†…å®¹</p>
<p>é‚£ä¹ˆè¦å¦‚ä½•è¿”å›å‘¢ï¼Ÿ</p>
<p>api é”™è¯¯å›è°ƒä¼˜å…ˆï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºé”™è¯¯å¯¹è±¡ï¼Œé»˜è®¤ä¸ºnull</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs=<span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">//å¼‚æ­¥è¯»å–æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶</span></span><br><span class="line">fs.readdir(<span class="string">'./node02'</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(err)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'è¯»å–é”™è¯¯'</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//åŒæ­¥è¯»å–ï¼Œè¦æ‰‹åŠ¨æ•è·é”™è¯¯</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">let</span> dirs=fs.readdirSync(<span class="string">'./node02'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(dirs)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(err)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/mongoose%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/mongoose%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/" itemprop="url">mongooseå®ç°æ•°æ®çš„å¢åˆ æ”¹æŸ¥</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-25T13:06:40+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  666å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  3min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å¼•å…¥mongoose"><a href="#å¼•å…¥mongoose" class="headerlink" title="å¼•å…¥mongoose"></a>å¼•å…¥mongoose</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose=require(<span class="string">'mongoose'</span>)]()</span><br><span class="line"><span class="comment">//é»˜è®¤æƒ…å†µ</span></span><br><span class="line">mongoose.<span class="built_in">connect</span>(<span class="string">'mongodb://localhost:27017/æ•°æ®åº“åç§°'</span>,&#123;useNewUrlParser:true&#125;)</span><br><span class="line"><span class="comment">//æœ‰è´¦æˆ·å¯†ç çš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">mongoose.<span class="built_in">connect</span>(<span class="string">'mongodb://'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h2><p>Schemaä¸ºæ•°æ®åº“å¯¹è±¡çš„é›†åˆï¼Œæ¯ä¸ªSchemaä¼šæ˜ å°„åˆ°mongodbä¸­çš„ä¸€ä¸ªcollectionï¼Œå¯ä»¥ç†è§£ä¸ºè¡¨ç»“æ„çš„å®šä¹‰ï¼Œä¸å…·å¤‡æ“ä½œæ•°æ®åº“çš„èƒ½åŠ›</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Schema=mongoose.Schema(&#123;</span><br><span class="line">    name:<span class="built_in">String</span>,</span><br><span class="line">    age:<span class="built_in">Number</span>,</span><br><span class="line">    status:<span class="string">'number'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><p>Modelå³æ•°æ®æ¨¡å‹ï¼Œæ˜¯ç”±schemaç”Ÿæˆçš„ï¼Œå¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”ŸæˆModel</span></span><br><span class="line">mongoose.model(æ¨¡å‹åç§°ï¼ˆé¦–å­—æ¯å¤§å†™),Schema)</span><br><span class="line"><span class="comment">//ä¾‹å¦‚ç”Ÿæˆä¸€ä¸ªåšå®¢å¸–å­æ¨¡å‹</span></span><br><span class="line"><span class="comment">//æ³¨æ„ï¼šå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯é›†åˆçš„åç§°ï¼Œæ‰€ä»¥å½“å‚æ•°ä¸ºå•æ•°æ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨è½¬ä¸ºå¤æ•°</span></span><br><span class="line"><span class="keyword">const</span> Post=mongoose.model(<span class="string">'Post'</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">	title:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;,</span><br><span class="line">	body:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;</span><br><span class="line">&#125;))</span><br><span class="line"><span class="comment">//æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">await</span> Post.insertMany([</span><br><span class="line">    &#123;title:<span class="string">'ç¬¬ä¸€ç¯‡å¸–å­'</span>ï¼Œbody:<span class="string">'å†…å®¹1'</span>&#125;,</span><br><span class="line">    &#123;title:<span class="string">'ç¬¬äºŒç¯‡å¸–å­'</span>ï¼Œbody:<span class="string">'å†…å®¹2'</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="keyword">const</span> posts=<span class="keyword">await</span> Post.find()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è®¾ç½®å…³è”"><a href="#è®¾ç½®å…³è”" class="headerlink" title="è®¾ç½®å…³è”"></a>è®¾ç½®å…³è”</h2><p>åœ¨schemaé‡Œå†æ–°å¢ä¸€ä¸ªå­—æ®µcategoryï¼Œæ’å…¥çš„æ•°æ®é‡Œä¹Ÿå†™ä¸Šcategoryï¼Œ</p>
<p>æ•°æ®åŒæ­¥çš„é—®é¢˜ï¼Œå½“è¦ä¿®æ”¹åˆ†ç±»åç§°æ—¶ï¼Œéœ€è¦ä¸€ä¸ªä¸ªä¿®æ”¹ï¼Œæ›´åˆç†çš„æ–¹å¼å°†åˆ†ç±»æ”¾åœ¨å¦ä¸€ä¸ªæ¨¡å‹ï¼Œå¸–å­ä¸å¦åˆ†ç±»è¿›è¡Œå…³è”ï¼Œä¸€æ—¦ä¿®æ”¹åˆ†ç±»ï¼Œ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Category=mongoose.model(<span class="string">'Category'</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">name:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;</span><br><span class="line">&#125;))</span><br><span class="line"><span class="keyword">const</span> Post=mongoose.model(<span class="string">'Post'</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">	title:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;,</span><br><span class="line">	body:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;,</span><br><span class="line">	category:&#123;<span class="keyword">type</span>:mongoose.SchemaTypes.objectId,ref:<span class="string">'Category'</span>&#125;</span><br><span class="line">&#125;))</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">await</span> Post.insertMany([</span><br><span class="line">        &#123; title: <span class="string">'ç¬¬ä¸€ç¯‡å¸–å­'</span>, body: <span class="string">'å†…å®¹1'</span> &#125;,</span><br><span class="line">        &#123; title: <span class="string">'ç¬¬äºŒç¯‡å¸–å­'</span>, body: <span class="string">'å†…å®¹2'</span> &#125;</span><br><span class="line">      ])</span><br><span class="line">      <span class="comment">//è®¾ç½®åˆ†ç±»</span></span><br><span class="line">      <span class="keyword">await</span> Category.insertMany([&#123; name: <span class="string">'nodeJs'</span> &#125;, &#123; name: <span class="string">'vuejs'</span> &#125;])</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">const</span> cat1 = Category.findOne(&#123; name: <span class="string">'nodeJs'</span> &#125;)</span><br><span class="line">      <span class="keyword">const</span> post1 = <span class="keyword">await</span> Post.findOne(&#123; title: <span class="string">'ç¬¬ä¸€ç¯‡å¸–å­'</span> &#125;)</span><br><span class="line">      <span class="keyword">const</span> post2 = <span class="keyword">await</span> Post.findOne(&#123; title: <span class="string">'ç¬¬äºŒç¯‡å¸–å­'</span> &#125;)</span><br><span class="line">      post1.category = cat1._id</span><br><span class="line">      post2.category = cat1</span><br><span class="line">      <span class="keyword">await</span> post1.save()</span><br><span class="line">      <span class="keyword">await</span> post2.save()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å…³è”æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">const</span> posts=<span class="keyword">await</span> Post.find().populate(<span class="string">'category'</span>)<span class="comment">//å¾—åˆ°ä¸€ä¸ªå¯¹è±¡</span></span><br></pre></td></tr></table></figure>



<p>å®é™…ä¸Šï¼Œä¸€ç¯‡æ–‡ç« å¯¹åº”å¤šä¸ªåˆ†ç±»</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Post=mongoose.model(<span class="string">'Post'</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">	title:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;,</span><br><span class="line">	body:&#123;<span class="keyword">type</span>:<span class="built_in">String</span>&#125;,</span><br><span class="line">	categories:[&#123;<span class="keyword">type</span>:mongoose.SchemaTypes.objectId,ref:<span class="string">'Category'</span>&#125;]</span><br><span class="line">&#125;))</span><br><span class="line"><span class="keyword">const</span> cat2=Category.findOne(&#123;name:<span class="string">'vuejs'</span>&#125;)</span><br><span class="line"> post1.categories = [cat1,cat2]</span><br><span class="line"> post2.categories=[cat2]</span><br><span class="line"><span class="keyword">const</span> posts=<span class="keyword">await</span> Post.find().populate(<span class="string">'categories'</span>)</span><br></pre></td></tr></table></figure>



<p>æ ¹æ®åˆ†ç±»è°ƒå‡ºå¯¹åº”æ–‡ç« </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CategorySchema = <span class="keyword">new</span> mongoose.Schema(</span><br><span class="line">      &#123;</span><br><span class="line">        name: &#123; <span class="attr">type</span>: <span class="built_in">String</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        toJSON: &#123; <span class="attr">virtuals</span>: <span class="literal">true</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    CategorySchema.virtual(<span class="string">'posts'</span>, &#123;</span><br><span class="line">      ref: <span class="string">'Posts'</span>,</span><br><span class="line">      localField: <span class="string">'_id'</span>, <span class="comment">//æœ¬åœ°é”®ï¼Œåœ¨åˆ†ç±»é‡Œç”¨æœ¬åœ°é”®å»å…³è”</span></span><br><span class="line">      foreignField: <span class="string">'categories'</span>, <span class="comment">//å¤–é”®ï¼Œpostsé‡Œè¢«å…³è”çš„é”®</span></span><br><span class="line">      justOne: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> cats = <span class="keyword">await</span> Category.find().populate(<span class="string">'posts'</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(cats)) <span class="comment">//é»˜è®¤æ˜¯ä¸æ˜¾ç¤ºè™šæ‹Ÿå­—æ®µçš„ï¼Œè®¾ç½®ä¸¤å¤„1.Schema2.stringifyå¤„ç†ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯è®¾ç½®å¥½1åå†ä¸Šé¢çš„populateåé¢åŠ ä¸Š.lean()è¡¨ç¤ºè¾“å‡ºçº¯ç²¹çš„jsonæ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>




          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/22/vue%E6%8F%92%E6%A7%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/22/vue%E6%8F%92%E6%A7%BD/" itemprop="url">vueæ’æ§½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-22T21:05:06+08:00">
                2019-10-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  41å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: åŒ¿åæ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½</span><br><span class="line">date: 2019<span class="string">-10</span><span class="string">-20</span> 17:13:45</span><br><span class="line"><span class="keyword">tags:</span> vueæ’æ§½</span><br><span class="line">categories:</span><br><span class="line">  - vue</span><br><span class="line">  - vueåŸºç¡€</span><br></pre></td></tr></table></figure>

<p>åŒ¿åæ’æ§½</p>
<p>å…·åæ’æ§½</p>
<p>ä½œç”¨åŸŸæ’æ§½</p>

          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/20/BFC%E4%B8%8E%E6%8A%98%E5%8F%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="rivoc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å½±æœˆæµå…‰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/20/BFC%E4%B8%8E%E6%8A%98%E5%8F%A0/" itemprop="url">BFCä¸æŠ˜å </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-20T23:41:08+08:00">
                2019-10-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  147å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1min
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><p>BFCï¼ˆBlock Formatting context)å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ˜¯CSS2.1è§„èŒƒçš„ä¸€ä¸ªæ¦‚å¿µ</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>BFCå¸ƒå±€è§„åˆ™ï¼š</p>
<ul>
<li>å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚</li>
<li>BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å ï¼ˆæ³¨æ„ï¼šæŒ‡çš„æ˜¯BFCå†…éƒ¨ï¼‰ã€‚</li>
<li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨å†…å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹äº¦ç„¶ã€‚</li>
<li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚</li>
</ul>
<p>è§¦å‘æ¡ä»¶ï¼š</p>
<p>æ ¹å…ƒç´ </p>
<ul>
<li>floatå±æ€§ä¸ä¸ºnone</li>
<li>positionä¸ºabsoluteæˆ–fixed</li>
<li>displayä¸ºinline-block,table-cell,table-caption,flex,inline-flex</li>
<li>overflowä¸ä¸ºvisible</li>
</ul>
<h2 id="BFCä¸marginæŠ˜å "><a href="#BFCä¸marginæŠ˜å " class="headerlink" title="BFCä¸marginæŠ˜å "></a>BFCä¸marginæŠ˜å </h2>
          
        
      
    </div>
    
    
    

    

    

    
<div>
  
</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="rivoc" />
            
              <p class="site-author-name" itemprop="name">rivoc</p>
              <p class="site-description motion-element" itemprop="description">æ…¢æ…¢èµ°å•Š</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
             
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/rivoc" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="1074852904@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i></a>
                  </span>
                
               
            </div>
           <video controls="" autoplay="" name="media"><source src="http://m8.music.126.net/20191020200137/b488384055c168ae91243389a5157717/ymusic/560e/0159/065b/ad87def2996332558a8611ee3ec61bc5.mp3?bitrate=128000" type="audio/mpeg"></video>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rivoc</span>

  
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  æœ¬ç«™è®¿å®¢æ•°:<span id="busuanzi_value_site_uv"></span>
</span>
</div>




  <span class="post-meta-divider">|</span>
  <div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">åšå®¢å…¨ç«™å…±12.2kå­—</span>
</div>



 




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  









  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  

  
  
    <script id="ribbon" type="text/javascript" size="130" alpha="0.5"  zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1.5,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/33.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"left","hOffset":0,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<script type="text/javascript" src="/js/src/love.js"></script>
